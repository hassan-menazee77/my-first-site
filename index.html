<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Simple Calculator</title>
    <meta name="description" content="A simple web calculator" />
    <style>
      :root{ --bg:#1b3865; --panel:#111827; --accent:#06b6d4; --muted:#94a3b8; }
      html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,system-ui,Arial;background:linear-gradient(180deg,#071126,#0b1220);color:#e6eef6;display:flex;align-items:center;justify-content:center}
      .calc{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:20px;width:320px;box-shadow:0 8px 30px rgba(2,6,23,0.6);}
      .display{background:transparent;border-radius:8px;padding:12px 14px;color:#e6eef6;font-size:24px;text-align:right;min-height:56px;box-sizing:border-box;border:1px solid rgba(255,255,255,0.04)}
      .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:14px}
      button{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.03);color:inherit;padding:14px;border-radius:8px;font-size:18px;cursor:pointer;transition:all .12s}
      button:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(2,6,23,0.6)}
      .op{background:linear-gradient(90deg,var(--accent),#7dd3fc);color:#001219;border:none}
      .wide{grid-column:span 2}
      footer{margin-top:12px;font-size:12px;color:var(--muted);text-align:center}
      @media (max-width:360px){.calc{width:92vw}}
    </style>
  </head>
  <body>
    <main class="calc" role="application" aria-label="Calculator">
      <div id="display" class="display" role="textbox" aria-readonly="true" aria-live="polite">0</div>

      <div class="keys">
        <button type="button" data-action="clear">C</button>
        <button type="button" data-action="back">⌫</button>
        <button type="button" data-value="%">%</button>
        <button type="button" class="op" data-value="/">÷</button>

        <button type="button" data-value="7">7</button>
        <button type="button" data-value="8">8</button>
        <button type="button" data-value="9">9</button>
        <button type="button" class="op" data-value="*">×</button>

        <button type="button" data-value="4">4</button>
        <button type="button" data-value="5">5</button>
        <button type="button" data-value="6">6</button>
        <button type="button" class="op" data-value="-">−</button>

        <button type="button" data-value="1">1</button>
        <button type="button" data-value="2">2</button>
        <button type="button" data-value="3">3</button>
        <button type="button" class="op" data-value="+">+</button>

        <button type="button" class="wide" data-value="0">0</button>
        <button type="button" data-value=".">.</button>
        <button type="button" class="op" data-action="equals">=</button>
      </div>

      <footer>Keyboard support: type numbers and + - * /, Enter to evaluate, Backspace to delete. — © 2026 جميع الحقوق محفوظة لـ Hassan Menazee</footer>
    </main>

    <script>
      (function(){
        const display = document.getElementById('display');
        let expr = '';

        function update(){
          display.textContent = expr || '0';
        }

        function safeEvaluate(s){
          // Allow only digits, operators, parentheses, percent and dots and spaces
          if(!/^[0-9+\-*/().%\s]+$/.test(s)) throw new Error('Invalid characters');
          // Replace % with /100
          s = s.replace(/%/g, '/100');
          // Use Function to evaluate safely after validation
          return Function('return ('+s+')')();
        }

        document.querySelector('.keys').addEventListener('click', e=>{
          const btn = e.target.closest('button');
          if(!btn) return;
          const val = btn.getAttribute('data-value');
          const action = btn.getAttribute('data-action');

          if(action === 'clear'){ expr = ''; update(); return }
          if(action === 'back'){ expr = expr.slice(0,-1); update(); return }
          if(action === 'equals'){ try{ const result = safeEvaluate(expr); expr = String(result); }catch(e){ expr = 'Error' } update(); return }
          expr += val; update();
        });

        // Keyboard support
        window.addEventListener('keydown', e=>{
          if((e.key >= '0' && e.key <= '9') || ['+','-','*','/','.','(',')','%'].includes(e.key)){
            expr += e.key; update(); e.preventDefault();
            return;
          }
          if(e.key === 'Enter'){
            try{ const result = safeEvaluate(expr); expr = String(result); }catch(err){ expr = 'Error' } update(); e.preventDefault(); return;
          }
          if(e.key === 'Backspace'){ expr = expr.slice(0,-1); update(); e.preventDefault(); return; }
          if(e.key.toLowerCase() === 'c'){ expr = ''; update(); e.preventDefault(); return; }
        });

        // initialize
        update();
      })();
    </script>
  </body>
</html>